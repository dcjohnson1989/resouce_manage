{% extends "layout.html" %}
{% block body %}
  {% if session.logged_in %}
    <script>
    function test(){
      var table = document.getElementById("resouce");
      for(var i=1; i<table.rows.length; i++){
        alert(table.rows[i].cells[0].innerText);
      }
    }
    function edit(item){
      alert("Johnson test");
      alert(item);
    }
    </script>
    <form action="{{ url_for('add_entry') }}" method=post class=add-entry>
      <dl>
        <dt>原料名:
        <dd><input type=text size=30 name=name>
        <dt>品牌:
        <dd><input type=text size=30 name=brand>
        <dt>数量:
        <dd><input type=text size=30 name=quantity>
        <dt>有效期:
        <dd><input type=text size=30 name=expire_date>
        <dt>存放方式:
        <dd><input type=text size=30 name=storage>      
        <dd><input type=submit value=Add>
      </dl>
    </form>
    <form action="{{ url_for('edit_entry') }}" method=post class=add-entry>
      <dl>
        <dt>序号:
        <dd><input type=text size=30 name=id>
        <dt>原料名:
        <dd><input type=text size=30 name=name>
        <dt>品牌:
        <dd><input type=text size=30 name=brand>
        <dt>数量:
        <dd><input type=text size=30 name=quantity>
        <dt>有效期:
        <dd><input type=text size=30 name=expire_date>
        <dt>存放方式:
        <dd><input type=text size=30 name=storage>      
        <dd><input type=submit value=Edit>
      </dl>
    </form>
  {% endif %}
  <table id=resouce>
    <tr>
      <th>序号</th>
      <th>原料名</th>
      <th>品牌</th>
      <th>数量</th>
      <th>有效期</th>
      <th>存放方式</th>
    </tr>
  {% for item in resource %}
    <tr>
      <td>{{ item.id }}</td>
      <td>{{ item.name }}</td>
      <td>{{ item.brand }}</td>
      <td>{{ item.quantity }}</td>
      <td>{{ item.expire_date }}</td>
      <td>{{ item.storage }}</td>
      <td>
        <form action="{{ url_for('delete_entry') }}" method=post>
        <!-- <input type=submit value=Delete onclick="test()"> -->
              <input type=hidden name=id value={{ item.id }}>
              <input type=submit value=Delete>
        </form>
      </td>
      <td><input type=submit value=Edit onclick="edit({{ item.id }})"></td>
    </tr>
  {% else %}
    <tr>Unbelievable.  No entries here so far</tr>
  {% endfor %}
  </table>
{% endblock %}