{% extends "layout.html" %}
{% block body %}
  {% if session.logged_in %}
    <script>
    // function test(){
    //   var table = document.getElementById("resource");
    //   var resource_json = {{ resource }}
    //   for(var i=0; i<resource_json.length; i++){
    //     table.innerHTML += '<tr> <td>' + resource_json[i].id + '</td> </tr>'
    //   }
    // }

    // function edit(){
    //   alert("Johnson test");
    // }
    </script>
    <form action="{{ url_for('add_entry') }}" method=post class=add-entry>
      <dl>
        <dt>原料名:
        <dd><input type=text size=30 name=name>
        <dt>品牌:
        <dd><input type=text size=30 name=brand>
        <dt>数量:
        <dd><input type=text size=30 name=quantity>
        <dt>有效期:
        <dd><input type=text size=30 name=expire_date>
        <dt>存放方式:
        <dd><input type=text size=30 name=storage> 
        <dt>单价:
        <dd><input type=text size=30 name=price>     
        <dd><input type=submit value=Add>
      </dl>
    </form>
  {% endif %}
  <input type=submit value=show onclick="edit()">
  <table id=resource>
    <tr>
      <th>序号</th>
      <th>原料名</th>
      <th>品牌</th>
      <th>数量</th>
      <th>有效期</th>
      <th>存放方式</th>
      <th>单价</th>
    </tr>
<!--   {% for item in resource %}
    <tr>
      <td>{{ item }}</td> -->
<!--       <td>{{ item.name }}</td>
      <td>{{ item.brand }}</td>
      <td>{{ item.quantity }}</td>
      <td>{{ item.expire_date }}</td>
      <td>{{ item.storage }}</td>
      <td>{{ item.price }}</td> -->
<!--       <td>
        <form action="{{ url_for('delete_entry') }}" method=post> -->
        <!-- <input type=submit value=Delete onclick="test()"> -->
              <!-- input  type=hidden name=id value={{ item.id }}>
              <input type=submit value=Delete>
        </form>
      </td>
      <td><input type=submit value=Edit onclick="edit({{ item|safe }})"></td>
    </tr>
  {% else %}
    <tr>Unbelievable.  No entries here so far</tr>
  {% endfor %} -->
  </table>
  <div id="myModal" class="modal">
    <!-- Modal content -->
    <div class="modal-content">
      <span class="close">&times;</span>
      <p>Some text in the Modal..</p>
      <button> test </button>
      <form action="{{ url_for('edit_entry') }}" method=post class=add-entry>
        <dl>
          <dt>序号:
          <dd><input type=text size=30 name=id>
          <dt>原料名:
          <dd><input type=text size=30 name=name>
          <dt>品牌:
          <dd><input type=text size=30 name=brand>
          <dt>数量:
          <dd><input type=text size=30 name=quantity>
          <dt>有效期:
          <dd><input type=text size=30 name=expire_date>
          <dt>存放方式:
          <dd><input type=text size=30 name=storage>
          <dt>单价:
          <dd><input type=text size=30 name=price>      
          <dd><input type=submit value=Edit>
        </dl>
      </form>
    </div>
  </div>
  <script type="text/javascript">

    function test(){
      var table = document.getElementById("resource");
      var resource_json = {{ resource }}
      for(var i=0; i<resource_json.length; i++){
        table.innerHTML += '<tr> <td>' + resource_json[i].id + '</td> </tr>'
      }
    }
        // Get the modal
    var modal = document.getElementById('myModal');

    // // Get the button that opens the modal
    // var btn = document.getElementById("myBtn");

    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];

    // When the user clicks the button, open the modal 
    // btn.onclick = function() {
    //     modal.style.display = "block";
    // }
    function edit(test){
      modal.style.display = "block";
      alert("Johnson test")
    }

    // When the user clicks on <span> (x), close the modal
    span.onclick = function() {
        modal.style.display = "none";
    }

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }
  </script>
{% endblock %}